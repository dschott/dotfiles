#!/usr/bin/env sh

if . shell-is-subshell; then
    echo "$0 must be sourced"
elif [ $(command -v javac) ]; then
    if os-is-darwin; then
        # Ref: http://www.jayway.com/2014/01/15/how-to-switch-jdk-version-on-mac-os-x-maverick/
        if [ -z "$1" ]; then
            printf "Current Version:\n    $(javac -version 2>&1)\n\nAvailable Versions:\n$(/usr/libexec/java_home -V 2>&1 | grep Library)\n"
        else
            . path-remove '/System/Library/Frameworks/JavaVM.framework/Home/bin'

            if [ -n "${JAVA_HOME+x}" ]; then
                . path-remove ${JAVA_HOME}
            fi

            export JAVA_HOME=`/usr/libexec/java_home -v $@`

            . path-add "${JAVA_HOME}/bin"
        fi
    elif os-is-linux; then
        # TODO: Handle Linux
        echo "LINUX!"
    fi
fi
