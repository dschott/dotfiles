#!/usr/bin/env sh

if ! check-command docker; then
    exit 1
fi

case "$(uname -s)" in
Linux)
    if ! check-command systemctl groupadd usermod; then
        exit 1
    fi

    sudo systemctl start docker
    sudo systemctl enable docker
    if ! groups "$(whoami)" | grep -q docker; then
        sudo groupadd docker
        sudo usermod -aG docker "$(whoami)"
        echo "docker group added"
        echo "you will need to log out and back in for the new group to take effect"
    fi
    ;;
*)
    >&2 echo "unsupported os"
    exit 1
esac
