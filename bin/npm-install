#!/usr/bin/env bash

! command-exists npm && exit

failed=()
packages=$(cat "${DOTPATH}/etc/npm/Packages")
for package in ${packages}; do
    if ! sudo npm install -g -y "${package}"; then
        failed+=("${package}")
    fi
done

if (( ${#failed[@]} > 0 )); then
    echo
    echo "Failed to install the following packages!"
    printf '\t%s\n' "${failed[@]}"
    exit 1
fi
