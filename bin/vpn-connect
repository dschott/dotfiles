#!/usr/bin/env sh

[ ! -f /opt/cisco/anyconnect/bin/vpn ] && exit

host=${1}

if [ -z ${host} ]; then
    hosts=$(vpn-hosts)
    default=$(echo "${hosts}" | head -1)
    
    printf "Available hosts:\n\n${hosts}\n\n"
    read  -p "Host (${default}): " host
    host=${host:-${default}}
fi

if [ -n "${host}" ]; then
    vpn-client-kill
    /opt/cisco/anyconnect/bin/vpn -s connect "${host}"
fi
