#!/usr/bin/env sh

! command-exists git && exit


if git-has-changes; then
    echo "local changes found. aborting!"
    exit 1
fi

message="$(git stash list --pretty=format:"%s" -1)"

echo "Committing with message '${message}'"

git stash pop
git commit -m "${message}"

echo "git log"
git log --pretty=format:"%s" -4

echo "git stash"
git stash list --pretty=format:"%s" -4 
