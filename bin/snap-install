#!/usr/bin/env bash

if ! check-command snap; then
    exit 1
fi

sudo snap refresh

failed=()
packages=$(cat "${DOTPATH}/etc/snap/Packages")
for package in ${packages}; do
    if ! sudo snap install --classic "${package}"; then
        failed+=("${package}")
    fi
done

if (( ${#failed[@]} > 0 )); then
    echo
    echo "Failed to install the following packages!"
    printf '\t%s\n' "${failed[@]}"
    exit 1
fi
