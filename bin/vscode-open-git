#!/usr/bin/env sh

! command-exists code && exit

dir="${1}"
repository="${2}"

if [ -z "${dir}" ]; then
    >&2 echo "directory is required"
    exit 1
fi

if [ -z "${repository}" ]; then
    >&2 echo "repository is required"
    exit 1
fi

if [ ! -d "${dir}" ]; then
    mkdir -p "${dir}"
    if ! git clone "${repository}" "${dir}"; then
        rm -rf "${dir}"
    fi
fi

vscode-open "${dir}"
